import pandas as pd
import matplotlib.pyplot as plt
from io import StringIO

raw = """run name	step	Naive Avg	MMLU (cot)	BBH	GPQA	ZebraLogic	AgiEval	Omega 500	AIME 25	AIME 24	HumanEvalPlus	MBPPPlus	LCB Lite	AlpacaEval 3	IFEval
2.00E-06	50	75.78	85.80	88.67	54.24	75.50	87.78	48.00	68.44	75.10	92.20	67.35	82.84	77.69	81.52
2.00E-06	100	76.16	85.95	88.96	54.46	73.70	87.93	51.00	68.44	76.56	91.77	67.43	82.68	76.30	84.84
2.00E-06	150	76.47	85.93	88.87	59.60	73.70	87.92	50.60	70.00	74.58	91.95	67.57	82.84	75.83	84.66
2.00E-06	200	76.92	86.15	89.31	59.38	76.00	87.94	53.20	69.27	75.83	91.52	67.59	80.23	77.22	86.32
2.00E-06	250	76.65	85.59	89.43	56.47	74.80	88.33	50.80	70.21	77.29	92.07	68.17	82.19	76.79	84.29
2.00E-06	300	76.80	86.16	88.85	58.48	74.80	88.47	52.20	69.69	76.46	91.71	67.17	82.19	77.37	84.84
2.00E-06	350	77.28	86.19	89.17	56.47	75.30	88.46	54.60	71.35	76.04	91.59	67.67	83.33	77.41	87.06
2.00E-06	400	77.11	86.05	89.26	58.26	74.80	88.19	51.40	72.19	76.46	91.16	67.80	82.84	75.80	88.17
2.00E-06	450	77.23	86.10	89.59	55.80	76.70	87.50	52.80	70.31	76.15	91.71	67.59	83.82	77.88	87.99
2.00E-06	500	77.51	85.98	89.74	56.92	74.90	88.12	55.40	71.98	75.31	91.65	67.62	82.84	79.24	87.99
2.00E-06	550	77.32	86.15	89.45	58.71	76.00	88.44	55.80	71.88	76.56	90.73	68.10	81.70	75.46	86.14
2.00E-06	600	77.70	86.51	90.00	57.59	75.30	88.30	56.40	71.98	76.67	91.10	67.80	83.33	76.22	88.91
2.00E-06	650	77.91	86.13	89.86	60.71	73.90	87.72	55.20	72.60	76.67	91.28	68.73	83.33	78.59	88.17
2.00E-06	700	77.53	86.05	89.80	57.59	74.80	88.36	55.40	73.54	75.94	91.04	67.94	81.86	76.12	89.46
2.00E-06	750	77.99	86.19	90.03	59.38	77.20	88.15	55.80	73.44	75.00	90.98	68.17	83.17	76.94	89.46
2.00E-06	800	77.49	86.01	89.59	54.91	75.20	87.87	57.20	73.75	75.10	91.46	68.73	82.35	77.21	87.99
2.00E-06	850	77.50	85.79	89.28	55.13	75.70	88.06	56.80	73.44	76.67	91.34	68.39	83.17	73.71	90.02
2.00E-06	900	77.84	86.13	89.71	58.04	76.40	88.58	57.60	73.12	76.56	91.16	68.94	83.99	72.79	88.91
2.00E-06	950	77.99	86.08	89.94	58.93	76.60	88.27	59.00	73.65	75.42	91.52	68.47	81.86	74.11	90.01
2.00E-06	1000	78.36	86.27	89.73	58.26	75.30	89.02	58.40	75.10	76.98	90.67	69.02	83.99	74.87	91.13
2.00E-06	1050	77.98	86.33	89.42	59.60	76.70	88.50	56.80	74.90	76.67	91.46	68.84	82.19	72.09	90.20
2.00E-06	1100	78.57	86.42	89.62	58.26	77.50	88.29	57.60	75.52	77.92	91.89	68.78	83.99	75.95	89.65
2.00E-06	1150	78.90	86.74	89.68	57.14	75.60	88.97	58.80	77.40	77.50	91.59	68.97	85.13	75.75	92.42
2.00E-06	1200	77.60	86.31	89.99	57.37	75.60	88.65	58.00	74.17	78.33	90.06	68.57	83.99	65.57	92.24
2.00E-06	1250	78.56	86.49	89.68	60.27	76.90	88.78	60.00	76.25	78.23	91.46	68.62	84.31	68.82	91.50
2.00E-06	1300	78.42	86.39	89.65	56.70	77.20	89.33	59.20	75.00	79.27	92.13	68.17	82.19	71.38	92.79
2.00E-06	1350	79.03	86.70	89.25	60.94	78.80	88.52	59.80	74.79	76.88	91.95	68.65	83.82	75.61	91.68
2.00E-06	1400	78.48	86.83	89.53	60.94	77.90	89.23	59.80	74.58	75.83	91.89	68.68	84.64	67.08	93.35
2.00E-06	1450	78.33	86.50	89.65	58.71	78.60	88.82	60.60	74.58	77.71	91.65	68.57	82.19	67.49	93.16
2.00E-06	1500	77.89	86.09	89.49	57.59	77.00	88.54	59.20	74.58	77.40	90.98	68.41	84.15	66.03	93.16
2.00E-06	1550	78.45	86.88	89.30	55.13	79.30	88.90	60.20	75.21	78.96	91.52	68.94	83.66	68.66	93.16
2.00E-06	1600	78.88	86.26	89.89	59.82	78.70	88.73	58.60	75.83	78.44	92.32	69.37	83.17	70.98	93.35
2.00E-06	1650	78.91	86.48	89.39	59.60	79.50	89.06	58.00	75.10	77.50	91.52	69.32	84.97	73.13	92.24
2.00E-06	1700	78.14	86.32	89.54	59.15	79.70	88.51	58.20	75.30	76.98	92.32	69.15	81.54	66.16	92.98
2.00E-06	1750	79.08	86.60	89.20	60.04	77.60	88.85	60.60	75.42	78.65	91.77	68.92	81.70	74.54	94.09
2.00E-06	1800	78.69	86.52	89.85	58.48	76.50	88.29	59.60	75.00	78.13	92.07	69.02	82.35	73.87	93.35
2.00E-06	1850	78.77	86.64	89.51	60.04	79.30	88.54	60.2	75.52	78.33	92.26	68.81	83.66	68.43	92.79
2.00E-06	1900	78.45	86.40	89.77	56.25	79.20	89.03	60.40	76.77	77.71	91.59	68.94	82.68	68.36	92.79
2.00E-06	1950	78.67	86.55	89.80	56.70	80.30	89.26	60.00	73.96	78.44	92.44	69.18	83.33	70.11	92.61
2.00E-06	2000	79.00	86.31	89.56	57.37	80.30	88.48	61.20	76.15	79.58	91.83	69.68	83.99	69.17	93.35
2.00E-06	2050	78.88	86.11	89.97	57.14	82.70	88.62	60.00	73.54	79.79	91.89	69.37	84.15	68.13	94.09
2.00E-06	2100	78.71	86.38	89.43	57.59	80.40	89.13	61.40	74.69	78.54	91.52	69.31	83.82	67.98	92.98
2.00E-06	2150	79.27	86.29	89.76	57.81	82.10	89.77	61.00	76.77	80.83	92.01	69.60	82.84	69.90	91.87
2.00E-06	2200	79.20	86.79	89.73	57.37	80.00	89.48	59.60	76.98	79.58	91.59	69.60	83.82	70.74	94.27
2.00E-06	2250	78.85	86.27	89.43	58.93	80.30	89.30	58.20	77.81	80.10	91.52	69.58	82.35	67.34	93.90
2.00E-06	2300	79.86	86.32	89.45	59.60	80.30	88.70	60.20	77.50	81.35	92.13	69.55	83.50	75.49	94.09
"""

df = pd.read_csv(StringIO(raw), sep="\t")

eval_cols = [c for c in df.columns if c not in ["run name", "step"]]

fig, axes = plt.subplots(4, 4, figsize=(20, 20))
axes = axes.flatten()

for ax, col in zip(axes, eval_cols):
    ax.plot(df["step"], df[col], marker="o")
    star_row = df.loc[df["step"] == 750, col]
    if not star_row.empty:
        ax.plot(750, star_row.iloc[0], marker="*", markersize=12)
    ax.set_title(col, fontsize=12)
    ax.grid(True, alpha=0.3)

for ax in axes[len(eval_cols):]:
    ax.axis("off")

plt.tight_layout()
plt.savefig("omo3_32b.png")